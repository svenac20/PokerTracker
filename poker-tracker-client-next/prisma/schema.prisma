generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model casino {
  id         Int           @id @default(autoincrement())
  name       String
  town       town          @relation(fields: [townId], references: [id])
  townId     Int
  pokerGames pokerGame[]
  owners     userCasinos[]

  @@index([townId], map: "Casino_townId_fkey")
	@@map("casino")
}

model country {
  id   Int    @id @default(autoincrement())
  name String
	@@map("country")
}

model gameType {
  id   Int    @id @default(autoincrement())
  name String

  pokergame pokerGame[]
	@@map("gametype")
}

model pokerGame {
  id            Int      @id @default(autoincrement())
  limit         String
  startTime     DateTime @default(now())
  gameTypeId    Int
  gameType      gameType @relation(fields: [gameTypeId], references: [id])
  playerWaiting Int
  tablesNumber  Int
  casinoId      Int
  casino        casino @relation(fields: [casinoId], references: [id])

  @@index([casinoId], map: "PokerGame_casinoId_fkey")
  @@index([gameTypeId], map: "PokerGame_gameTypeId_fkey")
	@@map("pokergame")
}

model role {
  id   Int    @id @default(autoincrement())
  name String
  user user[]

  @@map("role")
}

model town {
  id        Int      @id @default(autoincrement())
  name      String
  countryId Int
  casino    casino[]

  @@index([countryId], map: "Town_countryId_fkey")
  @@map("town")
}

model user {
  id          String        @id
  email       String        @unique(map: "User_email_key")
  googleId    String?       @unique(map: "User_googleId_key")
  username    String
  roleId      Int
  role        role          @relation(fields: [roleId], references: [id])
  usercasinos userCasinos[]

  @@index([roleId], map: "User_roleId_fkey")
  @@map("user")
}

model userCasinos {
  id       Int      @id @default(autoincrement())
  userId   String
  casinoId Int
  casino   casino   @relation(fields: [casinoId], references: [id])
  user     user     @relation(fields: [userId], references: [id])

  @@index([casinoId], map: "UserCasinos_casinoId_fkey")
  @@map("usercasinos")
}
